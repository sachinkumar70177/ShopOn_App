<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">

    <link rel="stylesheet" href="login.css">
</head>
<body>
   
    <div class="menu_bar">
        
        <a href="./cart.html" class="logodec"> <h1 class="logo">
            <p class="p">Come <span> On</span></p>SHOP <span>ON</span></h1> </a>
        
         <ul>
            <li><a href="./index.html">Home  <i class="fas fa-caret-down"></i></a>
            
            <div class="dropdown_menu">
                <ul>
                    <li><a href="./cart.html">Boy's Wear</a></li>
                    <li><a href="./cart.html">Men's Wear</a></li>
                    <li><a href="./cart.html">Women's wear</a></li>
                    <li><a href="./cart.html">Beauty</a></li>
                </ul>
            </div>
            
            </li>
           
            <li><a href="./newsletter.html">About</a></li>
            <li><a href="./help.html">Help</a></li>
         </ul>
        </div>

    <div id="form_maker">
        <h2>LOG IN TO YOUR ACCOUNT</h2>
        <hr>
        <p id="para">Enter your Password and Email</p>
        <hr>
        <form id="register" method="post"> 
          <br>
         <label >Email / Mobile No. :</label>
         <br>
         <input type="text"  id="name" placeholder="Enter Email or Number">
         <br><br>
        
         <label >Password :</label>
         <br>
         <input type="password" name="password" placeholder="Enter Your Password" autocomplete="current-password" required=""   id="Password">
         <i class="far fa-eye" id="togglePassword" style=" cursor: pointer;"></i>
         <br><br>
        
        
        <input type="submit" id="submit">
       <hr>
        
        </form>
       
        <a href="./signup.html">Go To SignUp Page </a>
        <p>(If you don't have account)</p>
        <hr>
        
        
       </div>
   
</body>
<script>
  
  
   let para=document.getElementById("para");
   let form=document.getElementById("register");
  
   let submit=document.getElementById("submit")

   let data=JSON.parse(localStorage.getItem("signupinfo")) || [];
  console.log(data)
   form.addEventListener("submit",function (e){
    e.preventDefault();
  
    let name=document.getElementById("name");
   let password=document.getElementById("Password");
 
   if(data.some((value)=>{ return value.email==name.value && value.password==password.value}))
    {
       
       
        alert("Logged in successfully" )
     
     let current_user=data.filter((v)=>{return v.email==name.value && v.password==password.value})[0]
     console.log(current_user.fname)
    
     localStorage.setItem("name",current_user.fname);
   


   

       window.location.href = "http://127.0.0.1:5500/foregoing-silver-4856/day4/cart.html"
    
       
    }
    else{
    
   
   
   
    para.style.color="red"
    para.innerText="Invalid email and password"
    setTimeout(() => {
        para.style.color="rgb(14, 0, 105)"
        para.innerText="Enter your Password and Email"
       password.value=""
       name.value=""
    }, 4000);

   }

   })
 

   const togglePassword = document.querySelector('#togglePassword');
 
   const password=document.getElementById("Password")
  togglePassword.addEventListener('click', function (e) {
    // toggle the type attribute
    const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
    password.setAttribute('type', type);
    // toggle the eye slash icon
    this.classList.toggle('fa-eye-slash');
});


</script>
</html>