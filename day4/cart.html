<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="cart.css">
</head>
<body>
    
    <div class="menu_bar">
        
        <a href="" class="logodec"> <h1 class="logo">
            <p class="p">Come <span> On</span></p>SHOP <span>ON</span></h1> </a>
         <input type="search" placeholder="SEARCH" id="search">
         <ul>
            <li><a href="/foregoing-silver-4856/day2/index.html">Home  <i class="fas fa-caret-down"></i></a>
            
            <div class="dropdown_menu">
                <ul>
                    <li><a href="">Boy's Wear</a></li>
                    <li><a href="">Men's Wear</a></li>
                    <li><a href="">Women's wear</a></li>
                    <li><a href="">Beauty</a></li>
                </ul>
            </div>
            
            </li>
            <li><a href="/foregoing-silver-4856/day3/login.html">Log In</a></li>
            <li><a href="/foregoing-silver-4856/day2/newsletter.html">About</a></li>
            <li><a href="/foregoing-silver-4856/day3/help.html">Help</a></li>
            <li><a href="./product.html">Wishlist</a></li>
         </ul>
        </div>
       <div class="main">
        <select id="filtered">
            <option value="">select categoey</option>
            <option value="men's clothing">men's clothing</option>
            <option value="jewelery">jewelery</option>
            <option value="electronics">electronics</option>
        </select>
        <select  id="sort">
            <option value="">sort by price</option>
            <option value="lth">low to high</option>
            <option value="htl">high to low</option>
        </select>
    </div>
      

            <div id="main"></div>

</body>
<script>
        let main=document.getElementById("main");
    let hello=document.getElementById("filtered");
    let sort=document.getElementById("sort");
    let search=document.getElementById("search");
    let lsdata=JSON.parse(localStorage.getItem("sachin"))|| [];

let fetcheddata=[];
    let ram=fetch("https://fakestoreapi.com/products");

ram.then(function(res){
    return res.json();
}).then(function(data){
    display(data)
fetcheddata=data

}).catch((error)=>{
  
})
console.log(fetcheddata)




sort.addEventListener("change",function(){

   if(sort.value=="lth"){
    let sorted=[...fetcheddata]
    sorted.sort((a,b)=>{
    return a.price-b.price;
       })
         display(sorted)
      }
     else if(sort.value=="htl"){
    let red=[...fetcheddata]
   red.sort((a,b)=>{
    return b.price-a.price;
})
display(red)
  }
 else if(sort.value==""){
    
    display(fetcheddata)
}

})




hello.addEventListener("change",function(){
    console.log(fetcheddata)
    if(hello.value==""){
        display(fetcheddata)
    }
    else{
        let filterr= fetcheddata.filter((el)=>{
    if(el.category==hello.value){
        return true;
    }
    else{
        return false;
    }
   })
   display(filterr)
 
    }
 
})




search.addEventListener("input",function (){
        console.log(search.value)
        
    let filterdata=fetcheddata.filter((el)=>{
        if(el.title.toUpperCase().includes(search.value.toUpperCase())==true){
            return true;
        }
        else{
            return false;
        }
    })
    console.log(filterdata)
    display(filterdata)
})









  function display(data){
    main.innerHTML=""
    data.forEach((el) => {
        
     let div=document.createElement("div");
     let img=document.createElement("img");
     let tittle=document.createElement("h2");
     let description=document.createElement("p");
     let price=document.createElement("h4");
     let category=document.createElement("p");
     let add=document.createElement("button");

img.src=el.image;
tittle.innerText=el.title;
description.innerText=el.description;

price.innerText=`$${+el.price}`;
category.innerText=el.category;
add.innerText="Add to cart" 
add.addEventListener("click",function (){
        if(check(el)){
          alert("Product Already in Cart")
        }
        else{
          lsdata.push({...el,quantity:1})

          localStorage.setItem("sachin",JSON.stringify(lsdata));
          alert("Product Added To Cart")
        }

        })



     main.append(div);
     div.append(img,tittle,description,price,category,add);

  

    });
  
  }


  function check(el){
      for(let i=0;i<lsdata.length;i++){
        if(el.id==lsdata[i].id){
          return true;
        }
        
      }
      return false;
     }

</script>
</html>